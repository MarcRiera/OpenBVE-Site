<!DOCTYPE html>
<html lang="es_mx">
  <head>
    <meta charset="utf-8"/>
    <title>openBVE Documentation</title>
    <link rel="stylesheet" href="../../../css/theme.css">
    <link rel="stylesheet" href="../../../css/bulma.custom.css">
    <link rel="icon" href="../../../favicon.png">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=0.5, maximum-scale=3.0">
    <script defer src="https://use.fontawesome.com/releases/v5.3.1/js/all.js"></script>
    <meta name="generator" content="Hugo 0.53" />

  </head>
  <body>

    <div id="sidebar">

      
      <div id="site-logo">
          <img alt="Site logo" src="../../../images/logo.png">
      </div>
      

      <nav>
<input type="checkbox" id="burger-toggle" class="burger-toggle" hidden>

<div id="menu-entries">
  <ul class="first">
    
    
    
    <li>Objetos
      
      <ul class="second">
        
        <li>Formatos nativos
          
          <ul class="third">
            
            <li><a href="../../../es_mx/objects/native/b3d.html">El objeto B3D</a>
              
            </li>
            
            <li><a href="../../../es_mx/objects/native/csv.html">El objeto CSV</a>
              
            </li>
            
            <li><a href="../../../es_mx/objects/native/animated.html">El objeto ANIMADO</a>
              
            </li>
            
            
              
            </li>
            
            
              
            </li>
            
            
              
            </li>
            
          </ul>
          
        </li>
        
        <li>Otros formatos
          
          <ul class="third">
            
            <li><a href="../../../es_mx/objects/other/loksim.html">Loksim3D (.l3dobj)</a>
              
            </li>
            
            <li><a href="../../../es_mx/objects/other/x.html">Microsoft DirectX (.x)</a>
              
            </li>
            
            <li><a href="../../../es_mx/objects/other/msts.html">Microsoft Train Simulator (.s)</a>
              
            </li>
            
            <li><a href="../../../es_mx/objects/other/obj.html">Wavefront (.obj)</a>
              
            </li>
            
          </ul>
          
        </li>
        
        <li><a href="../../../es_mx/objects/information.html">Información y sugerencias</a>
          
        </li>
        
      </ul>
      
    </li>
    
    <li>Rutas
      
      <ul class="second">
        
        <li><a href="../../../es_mx/routes/csv.html">The CSV route</a>
          
        </li>
        
        
          
          <ul class="third">
            
            <li><a href="../../../es_mx/routes/xml/dynamiclight.html">Adding Dynamic Lighting</a>
              
            </li>
            
            <li><a href="../../../es_mx/routes/xml/dynamicbackground.html">Dynamic and Object Based Backgrounds</a>
              
            </li>
            
            <li><a href="../../../es_mx/routes/xml/route_marker.html">Scripted Markers</a>
              
            </li>
            
            <li><a href="../../../es_mx/routes/xml/stationxml.html">XML Stations &amp; Request Stops</a>
              
            </li>
            
            <li><a href="../../../es_mx/routes/xml/trackfollowingobject.html">Track Following Object</a>
              
            </li>
            
          </ul>
          
        </li>
        
        <li><a href="../../../es_mx/routes/micsounds.html">Playing Sounds from a Microphone Input</a>
          
        </li>
        
        <li><a href="../../../es_mx/routes/rw.html">The RW route</a>
          
        </li>
        
        <li><a href="../../../es_mx/routes/tutorial_ats.html">Tutorial: Using ATS</a>
          
        </li>
        
        <li><a href="../../../es_mx/routes/tutorial_atc.html">Tutorial: Using ATC</a>
          
        </li>
        
        
          
        </li>
        
        
          
        </li>
        
        
          
        </li>
        
      </ul>
      
    </li>
    
    <li>Trenes
      
      <ul class="second">
        
        <li><a href="../../../es_mx/trains/overview.html">Vista general</a>
          
        </li>
        
        <li><a href="../../../es_mx/trains/train_xml.html">El archivo train.xml</a>
          
        </li>
        
        <li><a href="../../../es_mx/trains/train_dat.html">The train.dat file</a>
          
        </li>
        
        <li><a href="../../../es_mx/trains/extensions_cfg.html">The extensions.cfg file</a>
          
        </li>
        
        <li><a href="../../../es_mx/trains/panel_cfg.html">The panel.cfg file</a>
          
        </li>
        
        <li><a href="../../../es_mx/trains/panel2_cfg.html">The panel2.cfg file</a>
          
        </li>
        
        <li><a href="../../../es_mx/trains/panel_animated.html">El archivo panel.animated</a>
          
        </li>
        
        <li><a href="../../../es_mx/trains/default_sounds.html">Default sounds</a>
          
        </li>
        
        <li><a href="../../../es_mx/trains/sound_cfg.html">The sound.cfg file</a>
          
        </li>
        
        <li><a href="../../../es_mx/trains/ats_cfg.html">El archivo ats.cfg</a>
          
        </li>
        
        <li><a href="../../../es_mx/trains/openbveats.html">The OpenBveAts Plugin</a>
          
        </li>
        
        <li><a href="../../../es_mx/trains/plugins.html">Plugins de Tren</a>
          
          <ul class="third">
            
            
              
            </li>
            
          </ul>
          
        </li>
        
        <li><a href="../../../es_mx/trains/information.html">Information and tips</a>
          
        </li>
        
        
          
        </li>
        
        
          
        </li>
        
        
          
        </li>
        
        
          
        </li>
        
      </ul>
      
    </li>
    
    <li>Plugins
      
      <ul class="second">
        
        <li><a href="../../../es_mx/plugins/overview.html">Vista general</a>
          
        </li>
        
        
          
        </li>
        
      </ul>
      
    </li>
    
    <li>Información
      
      <ul class="second">
        
        <li><a href="../../../es_mx/information/encodings.html">Codificación de caracter</a>
          
        </li>
        
        <li><a href="../../../es_mx/information/numberformats.html">Formatos de número</a>
          
        </li>
        
        <li><a href="../../../es_mx/information/whitespaces.html">Espacios en blanco</a>
          
        </li>
        
        <li><a href="../../../es_mx/information/textureformats.html">Formatos de textura</a>
          
        </li>
        
        <li><a href="../../../es_mx/information/soundformats.html">Formatos de sonido</a>
          
        </li>
        
        <li><a href="../../../es_mx/information/standards.html">Estandares</a>
          
        </li>
        
        <li><a href="../../../es_mx/information/distribution.html">Distribuyendo contenido</a>
          
        </li>
        
        <li><a href="../../../es_mx/information/forking.html">Guía de birufurcaciones</a>
          
        </li>
        
        <li><a href="../../../es_mx/information/bve.html">Vs. simulador de trenes BVE Trainsim</a>
          
        </li>
        
      </ul>
      
    </li>
    
    <li>Tools
      
      <ul class="second">
        
        <li><a href="../../../es_mx/tools/objectviewer.html">Object Viewer</a>
          
        </li>
        
        <li><a href="../../../es_mx/tools/objectbender.html">Object Bender</a>
          
        </li>
        
        <li><a href="../../../es_mx/tools/routeviewer.html">Route Viewer</a>
          
        </li>
        
        <li><a href="../../../es_mx/tools/traineditor.html">Train Editor</a>
          
        </li>
        
      </ul>
      
    </li>
    
    <li>Otros Ejemplos
      
      <ul class="second">
        
        <li><a href="../../../es_mx/examples/demoroute.html">Ruta demostrativa</a>
          
        </li>
        
      </ul>
      
    </li>
    
  </ul>
</div>
</nav>

    </div>

    <div id="language-menu">
<div class="dropdown is-hoverable">
  <div class="dropdown-trigger">
    <button class="button" aria-haspopup="true" aria-controls="dropdown-menu">
      <span>Language</span>
      <span class="icon is-small">
        <i class="fas fa-angle-down" aria-hidden="true"></i>
      </span>
    </button>
  </div>
  <div class="dropdown-menu" id="dropdown-menu" role="menu">
    <div class="dropdown-content">
      <a href="../../../es_mx/objects/native/animated.html" class="dropdown-item">
        Mexican Spanish
      </a>
      
      <hr class="dropdown-divider">
      <a href="../../../ca/objects/native/animated.html" class="dropdown-item">
        Català
      </a>
      
      <hr class="dropdown-divider">
      <a href="../../../en/objects/native/animated.html" class="dropdown-item">
        English
      </a>
      
      <hr class="dropdown-divider">
      <a href="../../../fr/objects/native/animated.html" class="dropdown-item">
        French
      </a>
      
      <hr class="dropdown-divider">
      <a href="../../../ja/objects/native/animated.html" class="dropdown-item">
        日本語
      </a>
      
      <hr class="dropdown-divider">
      <a href="../../../zh/objects/native/animated.html" class="dropdown-item">
        Chinese
      </a>
      
      <hr class="dropdown-divider">
      <a href="../../../ko/objects/native/animated.html" class="dropdown-item">
        한국어
      </a>
      
    </div>
  </div>
</div>
</div>


    <div id="container">

        <div id="page-title">
          <h1>El formato de objeto <strong>.animated</strong></h1>
        </div>

        




<div id="content">
  

<h2 id="contenidos">■ Contenidos</h2>

<ul class='contents'>
<li><a href="#overview">1. Vista general</a></li>
<li><a href="#description">2. Secciones</a></li>
<li><a href="#operators">3. Lista de operadores para notación arimética</a></li>
<li><a href="#functions">4. Lista de funciones</a></li>
<li><a href="#variables">5. Lista de variables</a></li>
<li><a href="#performance">6. Rendimiento</a></li>
<li><a href="#tips">7. Sugerencias</a></li>
<li><a href="#examples">8. Ejemplo de funciones</a></li>
<li><a href="#grammar">9. Gramática formal</a></li>
</ul>



<h2 id="a-name-overview-a-1-vista-general"><a name="overview"></a>■ 1. Vista general</h2>

<p>El formato ANIMADO de objeto es un formato contenido habilitandote de referir otros objetos (B3D/CSV/X) y de aplicar animación en ellos. Esto tambien permite agrupar otros objetos (incluyendo otros objetos ANIMADOS) sin animarlos.</p>

<p>Los objetos animados también pueden ser usados en rutas CSV/RW (a menos que este explicita mente deshabilitado por algunos comandos), así como los objetos externos del tren por <em>extensions.cfg</em>, y así como la cabina 3D por el archivo <em>panel.animated</em>.</p>

<h5 id="bases">● Bases</h5>

<p>La animación es realizada por las siguientes directrices:</p>

<ul>
<li>Cambios de estado - básicamente habilitando de cambiar entre diferentes objetos en cualquier tiempo.</li>
<li>Traslación - moviendo objetos en tres direcciones independientes</li>
<li>Rotación - rotando objetos sobre los tres ejes independientes</li>
<li>Saltos de textura - habilitando el salto de coordenadas de textura en objetos en dos direcciones independientes</li>
</ul>

<h5 id="una-pequeña-formalidad">● Una pequeña formalidad</h5>

<p>El archivo es un texto plano codificado en cualquier arbitrario <a href="../../../es_mx/information/encodings.html" target="_blank">codificación</a>, Sin embargo, UTF-8 con un byte de orden marca es la opción preferida. El <a href="../../../es_mx/information/numberformats.html" target="_blank">modelo de análisis</a> para números es <strong>Strict</strong>. El nombre de archivo es arbitrario, pero debe tener la extensión <strong>.animated</strong>. El archivo es interpretado por cada linea, desde arriba hasta abajo.</p>

<h2 id="a-name-description-a-2-secciones"><a name="description"></a>■ 2. Secciones</h2>

<h5 id="la-sección-include">● La sección [Include]</h5>

<p>Puedes usar la sección [Include] solo para incluir otros objetos, pero sin animarlos. Esto te permite de usar el archivo de objetos ANIMADOS como un contenedor de grupo de otros objetos. Puede haber cualquier cantidad de secciones [Include] dentro del archivo.</p>

<p><div id="command">
<p>[Include]</p>

</div>
<br />
Esto inicia la sección.</p>

<p><div id="command">
<p><em>NombreArchivo<sub>0</sub></em><br />
<em>NombreArchivo<sub>1</sub></em><br />
<em>NombreArchivo<sub>2</sub></em><br />
&hellip;</p>

</div>
<br />
Defina una serie de objetos B3D/CSV/X/ANIMATED que deben ser incluidas como son.</p>

<p><div id="command">
<p><strong>Position = X, Y, Z</strong></p>

</div>
<br />
Esto defina la posición de los objetos, basicamente te permite de separarlos con respecto al resto de los archivos de objeto ANIMADOS.</p>

<hr />

<h5 id="la-sección-object">● La sección [Object]</h5>

<p>Puedes usar la sección [Object] para crear una sola animación. Esto requiere de configurar un estado a través de los parámetros de <em>Estados</em>, y de usar cualquier combinación de funciones que desees, lo cual provee control sobre la animación. Puede haber cualquier cantidad de secciones [Object] dentro del archivo.</p>

<p><div id="command">
<p>[Object]</p>

</div>
<br />
Esto inicia la sección.</p>

<p><div id="command">
<p><strong>Position = X, Y, Z</strong></p>

</div>
<br />
Defina la posición del objeto. Esto básicamente corresponde a un comando TranslateALL en el archivo CSV/B3D respectivamente, pero es realizado después de que cualquiera de las funciones es realizada. Por ejemplo, si deseas usar rotación, entonces ten en consideración que la rotación es efectuada sobre el origen (0,0,0). El comando <em>Posición</em> permite de re-posicionar el objeto después de que la rotación es realizada.</p>

<p><div id="command">
<p><strong>States = Archivo<sub>0</sub>, Archivo<sub>1</sub>, &hellip;, Archivo<sub>n-1</sub></strong></p>

</div>
<br />
Carga <em>n</em> objetos de extensión CSV/B3D/X. Por favor tenga en cuenta que el primer archivo indicado posee estado de indice 0. Usa múltiples archivos solo si deseas usar el cambio de estados.</p>

<p><div id="command">
<p><strong>StateFunction = Formula</strong></p>

</div>
<br />
Esto defina la función para cambiar de estado. El resultado de la fórmula <em>Formula</em> es redondeado al entero mas cercano. Si el entero esta entre 0 y <em>n</em>-1, donde <em>n</em> es el numero de estados definido por los <em>Estados</em>, el estado respectivo es mostrado , de otra manera, ningún objeto es mostrado. Puedes hacer uso del ultimo si deseas que sea un objeto de encendido/apagado con un solo estado.</p>

<p><div id="command">
<p><strong>TranslateXDirection = X, Y, Z</strong><br />
<strong>TranslateYDirection = X, Y, Z</strong><br />
<strong>TranslateZDirection = X, Y, Z</strong></p>

</div>
<br />
Esto defina la dirección para la función <em>TranslateXFunction</em>, <em>TranslateYFunction</em> y <em>TranslateZFunction</em>, respectivamente. Las direcciones predeterminadas son:</p>

<p><em>TranslateXDirection = 1, 0, 0</em><br />
<em>TranslateYDirection = 0, 1, 0</em><br />
<em>TranslateZDirection = 0, 0, 1</em></p>

<p>Esto significa que la función TranslateXFunction se moverá hacia la derecha predeterminado,  TranslateYFunction hacia arriba y TranslateZFunction hacia adelante, también es por eso que TranslateXFunction y así sucesivamente llevan sus nombres. Si usted define otras direcciones, entonces simplemente piensa que las tres funciones y sus direcciones asociadas como tres maneras independientes para si mover el objeto en esa dirección</p>

<p><div id="command">
<p><strong>TranslateXFunction = Formula</strong><br />
<strong>TranslateYFunction = Formula</strong><br />
<strong>TranslateZFunction = Formula</strong></p>

</div>
<br />
Esto defina la función que moverá el objeto en la dirección respectiva. La <em>Formula</em> necesita retornar la cantidad de metros a mover desde la posición inicial. Los parámetros <em>X</em>, <em>Y</em> y <em>Z</em> en la respectiva dirección son multiplicados por el resultado de la <em>Formula</em>, así que puedes por ejemplo multiplicar la formula por 2 o la dirección por 2 si es que deseas doblar la velocidad del movimiento</p>

<p><div id="command">
<p><strong>RotateXDirection = X, Y, Z</strong><br />
<strong>RotateYDirection = X, Y, Z</strong><br />
<strong>RotateZDirection = X, Y, Z</strong></p>

</div>
<br />
Esto defina la dirección para la función <em>RotateXFunction</em>, <em>RotateYFunction</em> y <em>RotateZFunction</em>, respectivamente. Las direcciones predeterminadas son:</p>

<p><em>RotateXDirection = 1, 0, 0</em><br />
<em>RotateYDirection = 0, 1, 0</em><br />
<em>RotateZDirection = 0, 0, 1</em></p>

<p>Esto significa que la función RotateXFunction rotará sobre el eje X predeterminadamente, RotateYFunction sobre el eje Y, y RotateZFunction sobre el eje Z, también es por eso que RotateXFunction y asi sucesivamente llevan sus nombres. Si usted define otras direcciones, entonces simplemente piense de que estas tres funciones y sus direcciones asociadas como tres maneras independientes para asi rotar el objeto.</p>

<p><div id="command">
<p><strong>RotateXFunction = Formula</strong><br />
<strong>RotateYFunction = Formula</strong><br />
<strong>RotateZFunction = Formula</strong></p>

</div>
<br />
Esto defina la función para rotar a lo largo de la dirección respectiva en orden contra-reloj. La <em>Formula</em> necesita regresar el ángulo por el cual rotar en radianes. El orden que estas rotaciones son ejecutadas es: RotateXFunction (primero), RotateYFunction (después) and RotateZFunction (último). Si usted usa más de una función de rotación al momento, ten en mente este orden. De ser necesario, reescribe las direcciones predeterminadas para las rotaciones si necesitas un orden distinto.</p>

<p><div id="command">
<p><strong>RotateXDamping = NaturalFrequency, DampingRatio</strong><br />
<strong>RotateYDamping = NaturalFrequency, DampingRatio</strong><br />
<strong>RotateZDamping = NaturalFrequency, DampingRatio</strong></p>

</div>
<br />
Esto defina la amortiguación para la función correspondiente. Si no es usado, la amortiguación no será ejecutada. <em>NaturalFrequency</em> es un valor no negativo correspondiente a la frecuencia angular del supuesta oscilación sin amortiguación en radianes por segundo. <em>DampingRatio</em> es un valor no negativo indicando el tipo de amortiguación. Valores entre 0 y 1 representa baja amortiguación, 1 representa amortiguación crítica, y valores superiores a 1 representan sobre-amortiguación</p>

<p><div id="command">
<p><strong>TextureShiftXDirection = X, Y</strong><br />
<strong>TextureShiftYDirection = X, Y</strong></p>

</div>
<br />
Esto defina las direcciones para la función <em>TextureShiftXFunction</em> y<em>TextureShiftYFunction</em>, respectivamente. Las direcciones por defecto son:</p>

<p><em>TextureShiftXDirection = 1, 0</em><br />
<em>TextureShiftYDirection = 0, 1</em></p>

<p>Esto significa que TextureShiftXFunction cambiará la textura a la derecha por defecto, y TextureShiftYFunction hacia abajo, también es por eso que TextureShiftXFunction y así sucesivamente llevan sus nombres. Si usted defina otras direcciones, entonces simplemente piense que estas dos funciones y sus direcciones asociadas como dos maneras independientes de cambiar las texturas en los objetos.</p>

<p><div id="command">
<p><strong>TextureShiftXFunction = Formula</strong><br />
<strong>TextureShiftYFunction = Formula</strong></p>

</div>
<br />
Esto defina las funciones para cambiar las texturas en la dirección respectiva. La textura es cambiada por el valor retornado de <em>Formula</em> en coordenadas de textura. La parte entra del resultado es ignorada, y la parte fraccional de 0.5 representa mover la textura a la mitad. El comando SetTextureCoordinate en el objeto defina las coordenadas, que son después agregadas en el resultado de estas formulas.</p>

<p><div id="command">
<p><strong>TrackFollowerFunction = Formula</strong></p>

</div>
<br />
Esto defina la función el cual mueve un objecto a lo largo de la vía de <strong>Rail 0</strong>. La <em>Formula</em> debe retornar la distancia en metros, para así el objeto sea movido, respetando las curvas y los cambios de altura de <strong>Rail 0</strong></p>

<p><div id="command">
<p><strong>TextureOverride = Valor</strong></p>

</div>
<br />
<em>Valor</em> = <strong>Timetable</strong>: Todas las caras mostrarán la imagen del itinerario configuradas por las rutas CSV/RW.<br />
<em>Valor</em> = <strong>None</strong>: Las texturas originales se mostrarán en las caras (conducta predeterminada).</p>

<p><div id="command">
<p><strong>RefreshRate = Segundos</strong></p>

</div>
<br />
Esto defina la mínima cantidad de tiempo que necesita transcurrir para que la función sea actualizada. Un valor de 0 obliga a la función a ser actualizada cada cuadro por segundo. Por favor tenga en cuenta que los objetos fuera del rango visual puedan ser actualizados menos frecuentemente sin importar este parámetro. Usa RefreshRate cuando no necesites una animación suave (en orden de optimizar los recursos), o cuando deliberadamente quieras que el objeto este actualizado con un intervalo personalizado.</p>

<hr />

<div id="warning">
<h4 id="nota-de-compatibilidad-con-openbve-2">Nota de compatibilidad con openBVE 2</h4>

<p>Durante el desarrolo de openBVE (v0.9) y durante el desarrollo del formato de objeto animado, hay algunos comandos en existencia que terminan en <em>RPN</em>, asi como <em>TranslateXFunctionRPN</em>. Estos comandos nunca se han hecho en cualquier lanzamiento oficial (v1.0) y nunca fueron pensados en ser usados fuera del entorno de desarrollo. Mientras estos siguen aún disponibles sin documentación, serán quitados en openBVE 2. Si estas usando algunos de estos comandos, por favor deshagase de ellos lo mas posible.</p>

</div>


<hr />

<h5 id="sobre-las-formulas">● Sobre las formulas</h5>

<p>Primero que todo, la notación aritmética, lo que puedes teclear dentro del parámetro <em>Formula</em>, es convertido en una notación funcional. Por cada notación aritmética, hay una notación funcional correspondiente. Algunas funciones no tienen un operador aritmético y solo pueden ser teclados en notación funcional. Para los operadores, la precedencia juega un rol importante. Puedes usar paréntesis para sobreponer el orden de precedencia así como generalmente en una fórmula matemática. Los nombres de las funciones no distinguen entre mayúsculas y minúsculas.</p>

<div id="warning">
<span>⚠</span>
<p>Por favor tenga en cuenta que el resultado de cualquier operación matemática o función pudiera ser infinito, intermediado o no real, 0 es retornado. Un error de desborde no puede ser prevenido, Así que debes tomar en cuenta esto.</p>

</div>


<h2 id="a-name-operators-a-3-lista-de-operadores-aritméticos-de-notación"><a name="operators"></a>■ 3. Lista de operadores aritméticos de notación</h2>

<h5 id="aritmética-básica">● Aritmética básica</h5>


<table class='type0'>
<thead>
<tr>
<th align="left">Aritmética</th>
<th align="left">Funcionalidad</th>
<th align="left">Descripción</th>
</tr>
</thead>

<tbody>
<tr>
<td align="left"><code>a + b</code></td>
<td align="left"><code>Suma[a,b, ...]</code></td>
<td align="left">Representa adición</td>
</tr>

<tr>
<td align="left"><code>a - b</code></td>
<td align="left"><code>Sustraer[a,b]</code></td>
<td align="left">Representa sustracción</td>
</tr>

<tr>
<td align="left"><code>-a</code></td>
<td align="left"><code>Menos[a]</code></td>
<td align="left">Convierte a negativo el número</td>
</tr>

<tr>
<td align="left"><code>a * b</code></td>
<td align="left"><code>Por[a,b,...]</code></td>
<td align="left">Representa multiplicación</td>
</tr>

<tr>
<td align="left"><code>a / b</code></td>
<td align="left"><code>Dividir[a,b]</code></td>
<td align="left">Representa división</td>
</tr>
</tbody>
</table>


<h5 id="comparaciones">● Comparaciones</h5>

<p>Todas las comparaciones devuelven 1 para verdadero y 0 para falso.</p>


<table class='type0'>
<thead>
<tr>
<th align="left">Aritmética</th>
<th>Funcionalidad</th>
<th>Descripción</th>
</tr>
</thead>

<tbody>
<tr>
<td align="left"><code>a == b</code></td>
<td><code>Igual[a,b]</code></td>
<td>Verdadero (1) si <em>a</em> es igual a <em>b</em></td>
</tr>

<tr>
<td align="left"><code>a != b</code></td>
<td><code>Noigual[a,b]</code></td>
<td>Verdadero (1) si <em>a</em> no es igual a <em>b</em></td>
</tr>

<tr>
<td align="left"><code>a &lt; b</code></td>
<td><code>Menor[a,b]</code></td>
<td>Verdadero (1) si <em>a</em> es menor que <em>b</em></td>
</tr>

<tr>
<td align="left"><code>a &gt; b</code></td>
<td><code>Mayor[a,b]</code></td>
<td>Verdadero (1) si <em>a</em> es mayor que <em>b</em></td>
</tr>

<tr>
<td align="left"><code>a &lt;= b</code></td>
<td><code>MenorIgual[a,b]</code></td>
<td>Verdadero (1) si <em>a</em> es menor o igual que <em>b</em></td>
</tr>

<tr>
<td align="left"><code>a &gt;= b</code></td>
<td><code>MayorIgual[a,b]</code></td>
<td>Verdadero (1) si <em>a</em> es mayor o igual que <em>b</em></td>
</tr>
</tbody>
</table>

<h5 id="operadores-lógicos">● Operadores lógicos</h5>

<p>Todos los operadores tratan 0 como falso y cualquier otro valor como verdadero, y retornan 1 por verdadero y 0 por falso.</p>

<table class='type0'>
<thead>
<tr>
<th align="left">Aritmética</th>
<th>Funcionalidad</th>
<th>Descripción</th>
</tr>
</thead>

<tbody>
<tr>
<td align="left"><code>!a</code></td>
<td><code>No[a]</code></td>
<td>Verdadero (1) si <em>a</em> es falso</td>
</tr>

<tr>
<td align="left"><code>a &amp; b</code></td>
<td><code>Y[a,b]</code></td>
<td>Verdadero (1) si ambos <em>a</em> y <em>b</em> son verdad</td>
</tr>

<tr>
<td align="left"><code>a</code> &#124; <code>b</code></td>
<td><code>O[a,b]</code></td>
<td>Verdadero (1) si cualquiera de <em>a</em> o <em>b</em> es verdad</td>
</tr>

<tr>
<td align="left"><code>a ^ b</code></td>
<td><code>Oexclusivo[a,b]</code></td>
<td>True (1) si cualquiera <em>a</em> o <em>b</em> es verdad</td>
</tr>
</tbody>
</table>

<h5 id="operador-de-precedencia">● Operador de precedencia</h5>

<p>Desde la alta prioridad a la baja. Los operadores de la misma precedencia son evaluados de izquierda a derecha en orden en que aparezcan en la formula.</p>

<table class='type1'>
<thead>
<tr>
<th><code>a[...]</code></th>
</tr>
</thead>

<tbody>
<tr>
<td><code>-</code> (Menos)</td>
</tr>

<tr>
<td><code>/</code></td>
</tr>

<tr>
<td><code>*</code></td>
</tr>

<tr>
<td><code>+</code>, <code>-</code> (Sustracción)</td>
</tr>

<tr>
<td><code>==</code>, <code>!=</code>, <code>&lt;</code>, <code>&gt;</code>, <code>&lt;=</code>, <code>&gt;=</code></td>
</tr>

<tr>
<td><code>!</code></td>
</tr>

<tr>
<td><code>&amp;</code></td>
</tr>

<tr>
<td><code>^</code></td>
</tr>

<tr>
<td>&#124;</td>
</tr>
</tbody>
</table>

<p><br></p>

<div id="warning">
<span>⚠</span>
<p>Por favor tenga en cuenta que algunas combinaciones de prefijo y operadores aritméticos no son reconocidos. Por ejemplo  <code>a*-b</code> no es aceptado. Use en vez <code>a*(-b)</code> o <code>-a*b</code>.</p>

</div>

<h2 id="a-name-functions-a-4-lista-de-funciones"><a name="functions"></a>■ 4. Lista de funciones</h2>

<h5 id="aritmética-básica">● Aritmética básica</h5>

<table class='type0'>
<thead>
<tr>
<th>Función</th>
<th>Descripción</th>
</tr>
</thead>

<tbody>
<tr>
<td><code>Reciprocal[x]</code></td>
<td>Retorna la reciprocidad, igual a 1/<em>x</em></td>
</tr>

<tr>
<td><code>Power[a,b,...]</code></td>
<td>Retorna <em>a</em> elevado a la <em>b</em> <sup>ava </sup>potencia. <em>b</em> debe ser un número no negativo. Para consistencia,  Power[0,<em>b</em>] siempre reotrna 1, incluso en el caso degenerado de Power[0,0], y <em>a</em> comenzando en negativo siempre retorna 0. Agregar más argumentos creará una cadena. Power[a,b,c] retornará <em>a</em> <sup><em>b</em><sup><em>c</em></sup></sup>.</td>
</tr>
</tbody>
</table>

<h5 id="funciones-numéricas">● Funciones numéricas</h5>

<table class='type0'>
<thead>
<tr>
<th>Función</th>
<th>Descripción</th>
</tr>
</thead>

<tbody>
<tr>
<td><code>Quotient[a,b]</code></td>
<td>Divide <em>a</em> entre <em>b</em> y redondea el resultado hacia abajo, igual a <code>Floor[a/b]</code>.</td>
</tr>

<tr>
<td><code>Mod[a,b]</code></td>
<td>Retorna el residuo al dividir <em>a</em> entre <em>b</em>, igual a <code>a-b*Floor[a/b]</code>.</td>
</tr>

<tr>
<td><code>Min[a,b,...]</code></td>
<td>Retorna el menor de los términos.</td>
</tr>

<tr>
<td><code>Max[a,b,...]</code></td>
<td>Retorna el mayor de los términos.</td>
</tr>

<tr>
<td><code>Abs[x]</code></td>
<td>Retorna el valor absoluto.</td>
</tr>

<tr>
<td><code>Sign[x]</code></td>
<td>Retorna el signo de <em>x</em>, el cual puede ser -1, 0 or 1.</td>
</tr>

<tr>
<td><code>Floor[x]</code></td>
<td>Redondea hacia abajo al entero más cercano.</td>
</tr>

<tr>
<td><code>Ceiling[x]</code></td>
<td>Redondea hacia arriba al entero más cercano.</td>
</tr>

<tr>
<td><code>Round[x]</code></td>
<td>Redondea al entero mas cercano. Números terminando en decimal .5 son redondeados hacia el entero más cercano.</td>
</tr>

<tr>
<td><code>random[Minimum, Maximum]</code></td>
<td>Retorna un nuevo número de coma flotante entre <em>Mínimo</em> y <em>Máximo</em>.</td>
</tr>

<tr>
<td><code>randomInt[Minimum, Maximum]</code></td>
<td>Retorna un nuevo número entero entre <em>Mínimo</em> y <em>Máximo</em>.</td>
</tr>
</tbody>
</table>

<h5 id="funciones-elementales">● Funciones elementales</h5>

<table class='type0'>
<thead>
<tr>
<th>Función</th>
<th>Descripción</th>
</tr>
</thead>

<tbody>
<tr>
<td><code>Exp[x]</code></td>
<td>La función exponencial, o <em>e</em> de la <em>x</em><sup>ava</sup>potencia.</td>
</tr>

<tr>
<td><code>Log[x]</code></td>
<td>La función logarítmica, con base <em>e</em>.</td>
</tr>

<tr>
<td><code>Sqrt[x]</code></td>
<td>La raíz cuadrada.</td>
</tr>

<tr>
<td><code>Sin[x]</code></td>
<td>Seno (en radianes).</td>
</tr>

<tr>
<td><code>Cos[x]</code></td>
<td>Coseno (en radianes)</td>
</tr>

<tr>
<td><code>Tan[x]</code></td>
<td>La tangente (en radianes).</td>
</tr>

<tr>
<td><code>ArcTan[x]</code></td>
<td>La tangente inversa - Cotangente (en radianes)</td>
</tr>
</tbody>
</table>

<h5 id="condicionales">● Condicionales</h5>

<table class='type0'>
<thead>
<tr>
<th>Función</th>
<th>Descripción</th>
</tr>
</thead>

<tbody>
<tr>
<td><code>If[cond,truevalue,falsevalue]</code></td>
<td>Si <em>condición</em> es != 0, retorna <em>valorverdadero</em>, en caso contrario <em>valorfalso</em></td>
</tr>
</tbody>
</table>

<h2 id="a-name-variables-a-5-lista-de-variables"><a name="variables"></a>■ 5. Lista de variables</h2>

<h5 id="primitivas">● Primitivas</h5>

<table class='type0'>
<thead>
<tr>
<th>Variable</th>
<th>Descripción</th>
</tr>
</thead>

<tbody>
<tr>
<td><code>value</code></td>
<td>El valor retornado por la función en su ultima evaluación. Al comienzo de la simulación, esto es 0.</td>
</tr>

<tr>
<td><code>delta</code></td>
<td>La diferencia desde la ultima evaluación de la función en segundos. Por favor tenga en cuenta que no hay tiempo garantizado desde que transcurre entre los llamados de función sucesivos.</td>
</tr>

<tr>
<td><code>currentState</code></td>
<td>Retorna el estado actual numérico del objeto.</td>
</tr>
</tbody>
</table>

<h5 id="tiempo-y-camara">● Tiempo y camara</h5>

<table class='type0'>
<thead>
<tr>
<th>Variable</th>
<th>Descripción</th>
</tr>
</thead>

<tbody>
<tr>
<td><code>time</code></td>
<td>El tiempo actual del juego medido en segundos desde la media noche del primer día.</td>
</tr>

<tr>
<td><code>cameraDistance</code></td>
<td>Una distancia cartesiana no negativa medida desde el objeto a la cámara en metros.</td>
</tr>

<tr>
<td><code>cameraMode</code></td>
<td>Retorna 0 si la cámara es actualmente en cabina 2D o 3D, 1 en caso contrario.</td>
</tr>
</tbody>
</table>

<h5 id="trenes">● Trenes</h5>

<p>Generalmente, objetos adjuntados a un tren particular o coche retorna valores para los trenes y cobhes, a menos que sean estados. Para objetos de escenario, la referencia es el coche del conductor del tren más cercano ( no necesariamente el tren del jugador).</p>

<p>En algunas de las siguientes variables <em>IndiceCoche</em> tiene el siguiente significado: 0 si el 1<sup>er</sup>coche desde el frente,1 es el 2<sup>do</sup>coche del frente, etc., mientras que -1 es el 1<sup>er</sup>carro desde la parte posterior, -2 es el 2<sup>do</sup>carro desde la parte posterior, etc. En general, los indices de los coches desde -<em>coches</em> a <em>coches</em>-1 representa los coches existentes, donde <em>coches</em> es el numero de carros que el tren tiene, mientras los valores fuera de este rango representan coches no existentes. Así como los trenes tienen al menos un coche, indices -1 y 0 están garantizados en existir en cualquier tren.</p>

<h5 id="trenes-generalidades">● Trenes (generalidades)</h5>

<table class='type0'>
<thead>
<tr>
<th>Variable</th>
<th>Descripción</th>
</tr>
</thead>

<tbody>
<tr>
<td><code>cars</code></td>
<td>El número de coches que el tren posee.</td>
</tr>

<tr>
<td><code>speed</code></td>
<td>La velocidad actual del coche en m/s. Es positivo cuando el tren viaja hacia adelante, y negativa cuando el tren viaja hacia atrás.</td>
</tr>

<tr>
<td><code>speed[carIndex]</code></td>
<td>La velocidad actual del coche número <em>carIndex</em> en m/s. Es positivo cuando el tren viaja hacia adelante, y negativa cuando el tren viaja hacia atrás.</td>
</tr>

<tr>
<td><code>speedometer</code></td>
<td>La velocidad percibida del actual coche en m/s así como esto pudiera aparecer un velocímetro en patinaje de ruedas y bloqueo de ruedas.</td>
</tr>

<tr>
<td><code>speedometer[carIndex]</code></td>
<td>La velocidad percibida del coche de indice <em>carIndex</em> en m/s así como esto pudiera aparecer un velocímetro en patinaje de ruedas y bloqueo de ruedas.</td>
</tr>

<tr>
<td><code>acceleration</code></td>
<td>La aceleración del coche actual en m/s².</td>
</tr>

<tr>
<td><code>acceleration[carIndex]</code></td>
<td>La aceleración actual del coche número <em>carIndex</em> en m/s².</td>
</tr>

<tr>
<td><code>accelerationMotor</code></td>
<td>La aceleración actual la cual el motor del primer coche genera en m/s².</td>
</tr>

<tr>
<td><code>accelerationMotor[carIndex]</code></td>
<td>La aceleración actual la cual el motor del coche número <em>carIndex</em> genera en m/s².</td>
</tr>

<tr>
<td><code>distance</code></td>
<td>Una distancia cartesiana no negativa medida desde el objeto al coche más cercano en metros. Solamente es usado por objetos de escenario.</td>
</tr>

<tr>
<td><code>distance[carIndex]</code></td>
<td>La distancia cartesiana no negativa medida desde el objeto al coche número <em>carIndex</em> en metros, ó 0 si el coche no existe. Solamente es usado por objetos de escenario.</td>
</tr>

<tr>
<td><code>trackDistance</code></td>
<td>La distancia de la vía desde el objeto al extremo más cercano del tren mas próximo en metros. Es positivo cuando el tren esta en frente del objeto, y negativo cuando esta por detrás, y cero cuando el objeto esta entre los extremos del tren.</td>
</tr>

<tr>
<td><code>trackDistance[carIndex]</code></td>
<td>La distancia de la vía desde el objeto al coche número <em>carIndex</em> del tren mas próximo en metros. Es positivo cuando el centro del coche esté en frente del objeto, y negativo cuando esta por detrás, Retorna 0 si el coche no existe. Solamente es usado por objetos de escenario.</td>
</tr>

<tr>
<td><code>destination</code></td>
<td>La configuración actual del destino del tren (Es configurado por <em>Track.Destination</em> ó la interfaz del plugin)</td>
</tr>

<tr>
<td><code>distanceNextStation</code></td>
<td>La distancia en metros para la siguiente estación.</td>
</tr>

<tr>
<td><code>distanceStation[stationIndex]</code></td>
<td>La distancia en metros a la estación con indice <em>stationIndex</em></td>
</tr>

<tr>
<td><code>stopsNextStation</code></td>
<td>Indica si el tren hace parada en la próxima estación.</td>
</tr>

<tr>
<td><code>stopsStation[stationIndex]</code></td>
<td>Indica que el tren se detiene en la estación con indice <em>stationIndex</em></td>
</tr>

<tr>
<td><code>nextStation</code></td>
<td>El indice de la siguiente estación.</td>
</tr>

<tr>
<td><code>nextStationStop</code></td>
<td>El indice de la siguiente estación donde el tren debe hacer parada.</td>
</tr>
</tbody>
</table>

<h5 id="trenes-freno">● Trenes (freno)</h5>

<table class='type0'>
<thead>
<tr>
<th>Variable</th>
<th>Descripción</th>
</tr>
</thead>

<tbody>
<tr>
<td><code>mainReservoir</code></td>
<td>La presión actual de la reserva principal del coche, medido en Pascal.</td>
</tr>

<tr>
<td><code>mainReservoir[carIndex]</code></td>
<td>La presión actual de la reserva principal del coche de indice numero <em>carIndex</em>, medido en Pascal.</td>
</tr>

<tr>
<td><code>emergencyReservoir</code></td>
<td>La presión actual de reserva de emergencia en este coche, medido en Pascal.</td>
</tr>

<tr>
<td><code>emergencyReservoir[carIndex]</code></td>
<td>La presión actual del reserva de emergencia en el coche de indice número <em>carIndex</em>, medido en Pascal.</td>
</tr>

<tr>
<td><code>brakePipe</code></td>
<td>La presión actual de la tubería de freno en este coche, medido en Pascal.</td>
</tr>

<tr>
<td><code>brakePipe[carIndex]</code></td>
<td>La presión actual de la tubería de freno en este coche de indice número <em>carIndex</em>, medido en Pascal.</td>
</tr>

<tr>
<td><code>brakeCylinder</code></td>
<td>La presión actual del cilindro de freno en este coche, medido en Pascal.</td>
</tr>

<tr>
<td><code>brakeCylinder[carIndex]</code></td>
<td>La presión actual del cilindro de freno en este coche de indice número <em>carIndex</em>, medido en Pascal.</td>
</tr>

<tr>
<td><code>straightAirPipe</code></td>
<td>La presión actual de la tubería de aire recto en este coche, medido en Pascal.</td>
</tr>

<tr>
<td><code>straightAirPipe[carIndex]</code></td>
<td>La presión actual de la tubería de aire recto en este coche de índice número <em>carIndex</em>, medido en Pascal.</td>
</tr>
</tbody>
</table>

<h5 id="trenes-puertas">● Trenes (puertas)</h5>

<table class='type0'>
<thead>
<tr>
<th>Variable</th>
<th>Descripción</th>
</tr>
</thead>

<tbody>
<tr>
<td><code>doors</code></td>
<td>El estado de las puertas. Retorna 0 si esta totalmente cerrada, 1 si esta totalmente abierta, o cualquier otro estado intermedio, las puertas están parciales en un estado abierto.</td>
</tr>

<tr>
<td><code>doors[carIndex]</code></td>
<td>El estado de las puertas del coche de indice número <em>carIndex</em>. Retorna 0 si esta totalmente cerrada, 1 si esta totalmente abierta, o cualquier otro estado intermedio, las puertas están parciales en un estado abierto.</td>
</tr>

<tr>
<td><code>leftDoors</code></td>
<td>El estado de las puertas del lado izquierdo. Retorna 0 si esta totalmente cerrada, 1 si esta totalmente abierta, o cualquier otro estado intermedio, las puertas están parciales en un estado abierto.</td>
</tr>

<tr>
<td><code>leftDoors[carIndex]</code></td>
<td>El estado de las puertas del lado izquierdo del coche de indice número <em>carIndex</em>. Retorna un valor entre 0 y 1, en un estado parcial de puertas que están en un estado de apertura, o -1 si el coche no existe.</td>
</tr>

<tr>
<td><code>rightDoors</code></td>
<td>El estado de las puertas del lado derecho. Retorna 0 si esta totalmente cerrada, 1 si esta totalmente abierta, o cualquier otro estado intermedio, las puertas están parciales en un estado abierto.</td>
</tr>

<tr>
<td><code>rightDoors[carIndex]</code></td>
<td>El estado de las puertas del lado derecho del coche de indice número <em>carIndex</em>. Retorna un valor entre 0 y 1, en un estado parcial de puertas que están en un estado de apertura, o -1 si el coche no existe.</td>
</tr>

<tr>
<td><code>leftDoorsTarget</code></td>
<td>El estado de destino anticipado de las puertas izquierdas. Retorna cualquiera 0 (cerrado) ó 1 (abierto).</td>
</tr>

<tr>
<td><code>leftDoorsTarget[carIndex]</code></td>
<td>El estado de destino anticipado de las puertas izquierdas del coche de indice número <em>carIndex</em>. Retorna cualquiera 0 (cerrado) ó 1 (abierto).</td>
</tr>

<tr>
<td><code>rightDoorsTarget</code></td>
<td>El estado de destino anticipado de las puertas derechas. Retorna cualquiera 0 (cerrado) ó 1 (abierto).</td>
</tr>

<tr>
<td><code>rightDoorsTarget[carIndex]</code></td>
<td>El estado de destino anticipado de las puertas derechas del coche de indice número <em>carIndex</em>. Retorna cualquiera 0 (cerrado) ó 1 (abierto).</td>
</tr>

<tr>
<td><code>leftDoorsButton</code></td>
<td>El estado del botón de la puerta izquierda. Retorna cualquiera 0 (liberado) o 1 (presionado).</td>
</tr>

<tr>
<td><code>rightDoorsButton</code></td>
<td>El estado del botón de la puerta derecha. Retorna cualquiera 0 (liberado) o 1 (presionado).</td>
</tr>

<tr>
<td><code>pilotLamp</code></td>
<td>El estado de la lampara piloto (Puertas cerradas y listo para iniciar). Retorna cualquiera 0 (apagado) o 1 (encendido).</td>
</tr>
</tbody>
</table>

<h5 id="trenes-otros">● Trenes (otros)</h5>

<table class='type0'>
<thead>
<tr>
<th>Variable</th>
<th>Descripción</th>
</tr>
</thead>

<tbody>
<tr>
<td><code>reverserNotch</code></td>
<td>El estado de inversor de marcha, el cual puede ser -1 (hacia atrás), 0 (neutro), o adelante (1).</td>
</tr>

<tr>
<td><code>powerNotch</code></td>
<td>El la posición de la palanca de tracción, por ejemplo, 0 para N, 1 para P1, 2 para P2, 3 para P3, etc.</td>
</tr>

<tr>
<td><code>powerNotches</code></td>
<td>La cantidad de posiciones de palanca de tracción que el tren tiene.</td>
</tr>

<tr>
<td><code>brakeNotch</code></td>
<td>La posición actual de la posición de la palanca de freno. <br />● Para trenes sin freno de aire automático: 0 para N, 1 para B1, 2 para B2, 3 para B3, etc.<br />● Para trenes con freno de aire automático: 0  para REL, 1 para LAP y 2 para SRV.</td>
</tr>

<tr>
<td><code>brakeNotches</code></td>
<td>La cantidad de posiciones de palanca de freno que el tren posee. Para trenes con freno automático de aire, esto retorna 2.</td>
</tr>

<tr>
<td><code>brakeNotchLinear</code></td>
<td>La combinación de la palanca de freno, freno presionado y freno de emergencia.<br />● Para trenes sin freno de aire automático y sin freno presionado: 0 para N, 1 para B1, 2 para B2, 3 para B3, etc., hasta <em>BrakeNotches</em>+1 para EMG.<br />● Para trenes sin freno de aire automático pero con freno presionado: 0 for N, 1 para HLD, 2 para B1, 3 para B2, 4 para B3, etc., hasta <em>BrakeNotches</em>+2 para EMG.<br />● Para trenes con freno de aire automático: 0 para REL, 1 para LAP, 2 para SRV o 3 para EMG.</td>
</tr>

<tr>
<td><code>brakeNotchesLinear</code></td>
<td>El valor mas alto retornado por <em>brakeNotchesLinear</em>.<br />● Para trenes sin freno de aire automático y sin freno presionado, esto es <em>BrakeNotches</em>+1.<br />● Para trenes sin freno de aire automático pero con freno presionado, esto es <em>BrakeNotches</em>+2.<br />● Para trenes con freno de aire automático, esto retorna 3.</td>
</tr>

<tr>
<td><code>locoBrake</code></td>
<td>La posición actual del freno de locomotora.</td>
</tr>

<tr>
<td><code>locoBrakeNotches</code></td>
<td>La cantidad de posiciones de freno de locomotora que el tren tiene.</td>
</tr>

<tr>
<td><code>emergencyBrake</code></td>
<td>Cuando el freno de emergencia es activado (1) o no (0).</td>
</tr>

<tr>
<td><code>hasAirBrake</code></td>
<td>Cuando el tren tiene freno de aire automático (1) o no (0).</td>
</tr>

<tr>
<td><code>holdBrake</code></td>
<td>Cuando el freno presionado este activo (1) o no (0).</td>
</tr>

<tr>
<td><code>hasHoldBrake</code></td>
<td>Cuando el tren posee freno presionado (1) o no (0).</td>
</tr>

<tr>
<td><code>constSpeed</code></td>
<td>Cuando el sistema de velocidad constante esta activo (1) o no (0).</td>
</tr>

<tr>
<td><code>hasConstSpeed</code></td>
<td>Cuando el tren posee sistema de velocidad constante (1) o no (0).</td>
</tr>

<tr>
<td><code>hasPlugin</code></td>
<td>Cuando el tren usa plugin (1) o no (0).</td>
</tr>

<tr>
<td><code>pluginState[i]</code></td>
<td>El estado de la i<sup>ava</sup> variable del plugin, retornando un entero dependiendo del plugin. Es lo mismo para ats<em>i</em> en el panel2.cfg.</td>
</tr>

<tr>
<td><code>FrontAxleCurveRadius[carIndex]</code></td>
<td>Retorna el radio de curva del eje frontal del coche de indice número <em>carIndex</em>.</td>
</tr>

<tr>
<td><code>RearAxleCurveRadius[carIndex]</code></td>
<td>Retorna el radio de curva del eje posterior del coche de indice número <em>carIndex</em>.</td>
</tr>

<tr>
<td><code>CurveCant[carIndex]</code></td>
<td>Retorna el valor del peralte del coche de indice número <em>carIndex</em>.</td>
</tr>

<tr>
<td><code>Pitch[carIndex]</code></td>
<td>Retorna el valor de la diferencia de elevación para el coche de indice número <em>carIndex</em>..</td>
</tr>

<tr>
<td><code>Odometer</code></td>
<td>Retorna un numero representando la distancia en metros viajadas por el coche actual.</td>
</tr>

<tr>
<td><code>Odometer[carIndex]</code></td>
<td>Retorna un numero representando la distancia en metros viajadas por el coche de indice número <em>carIndex</em>.</td>
</tr>

<tr>
<td><code>Klaxon</code></td>
<td>Retorna la bocina actual que esta reproduciendo (cualquiera) de las siguientes: (0) Ninguna bocina se esta reproduciendo (1) La bocina principal esta reproduciéndose (2) La bocina secundaria esta reproduciéndose (3) La bocina musical esta reproduciéndose. <em>Nota</em>: Si múltiples bocinas se encuentran reproduciéndose, el valor mas bajo será retornado.</td>
</tr>

<tr>
<td><code>PrimaryKlaxon</code></td>
<td>Retorna 1 si la bocina primaria esta reproduciéndose, 0 en caso contrario.</td>
</tr>

<tr>
<td><code>SecondaryKlaxon</code></td>
<td>Retorna 1 si la bocina secundaria esta reproduciéndose, 0 en caso contrario.</td>
</tr>

<tr>
<td><code>MusicKlaxon</code></td>
<td>Retorna 1 si la bocina musical esta reproduciéndose, 0 en caso contrario.</td>
</tr>

<tr>
<td><code>passAlarm</code></td>
<td>Cuando la alarma de rebase de estación ha sido activada. Retorna 0 (inactivo) o 1 (activo).</td>
</tr>

<tr>
<td><code>stationAdjustAlarm</code></td>
<td>Cuando la alarma de ajuste de estación ha sido activada. Retorna 0 (inactivo) o 1 (activo).</td>
</tr>
</tbody>
</table>

<p>Si <em>pluginState[i]</em> es usado con el sistema de seguridad ATS y ATC, el siguiente mapa de opciones para <em>i</em> puede ser aplicado:</p>

<table class='type0'>
<thead>
<tr>
<th><em>i</em></th>
<th>Español</th>
<th>日本語 (Japonés)</th>
<th>Valores de retorno</th>
<th></th>
<th>pluginState[271]</th>
<th>Significado</th>
</tr>
</thead>

<tbody>
<tr>
<td>256</td>
<td>ATS</td>
<td>ATS</td>
<td>0 (apagado) o 1 (encendido)</td>
<td bgcolor='#D0D0D0'></td>
<td>0</td>
<td>ATC no disponible</td>
</tr>

<tr>
<td>257</td>
<td>ATS RUN</td>
<td>ATS 作動</td>
<td>0 (apagado), 1 (encendido) o 2 (parpadeando)</td>
<td bgcolor='#D0D0D0'></td>
<td>1</td>
<td>0 km/h</td>
</tr>

<tr>
<td>258</td>
<td>ATS RUN</td>
<td>ATS 作動</td>
<td>0 (apagado / sin parpadear), 1 (encendido / parpadeando)</td>
<td bgcolor='#D0D0D0'></td>
<td>2</td>
<td>15 km/h</td>
</tr>

<tr>
<td>259</td>
<td>P POWER</td>
<td>P 電源</td>
<td>0 (apagado) o 1 (encendido)</td>
<td bgcolor='#D0D0D0'></td>
<td>3</td>
<td>25 km/h</td>
</tr>

<tr>
<td>260</td>
<td>PTN APPROACH</td>
<td>パターン接近</td>
<td>0 (apagado) o 1 (encendido)</td>
<td bgcolor='#D0D0D0'></td>
<td>4</td>
<td>45 km/h</td>
</tr>

<tr>
<td>261</td>
<td>FRENO LIBERADO</td>
<td>ブレーキ開放</td>
<td>0 (apagado) o 1 (encendido)</td>
<td bgcolor='#D0D0D0'></td>
<td>5</td>
<td>55 km/h</td>
</tr>

<tr>
<td>262</td>
<td>FRENO APLICADO</td>
<td>ブレーキ動作</td>
<td>0 (apagado) o 1 (encendido)</td>
<td bgcolor='#D0D0D0'></td>
<td>6</td>
<td>65 km/h</td>
</tr>

<tr>
<td>263</td>
<td>ATS P</td>
<td>ATS-P</td>
<td>0 (apagado) o 1 (encendido)</td>
<td bgcolor='#D0D0D0'></td>
<td>7</td>
<td>75 km/h</td>
</tr>

<tr>
<td>264</td>
<td>FALLA</td>
<td>故障</td>
<td>0 (apagado) o 1 (encendido)</td>
<td bgcolor='#D0D0D0'></td>
<td>8</td>
<td>90 km/h</td>
</tr>

<tr>
<td>265</td>
<td>ATC</td>
<td>ATC</td>
<td>0 (apagado) o 1 (encendido)</td>
<td bgcolor='#D0D0D0'></td>
<td>9</td>
<td>100 km/h</td>
</tr>

<tr>
<td>266</td>
<td>ATC ENCENDIDO</td>
<td>ATC 電源</td>
<td>0 (apagado) o 1 (encendido)</td>
<td bgcolor='#D0D0D0'></td>
<td>10</td>
<td>110 km/h</td>
</tr>

<tr>
<td>267</td>
<td>ATC SERVICIO</td>
<td>ATC 常用</td>
<td>0 (apagado) o 1 (encendido)</td>
<td bgcolor='#D0D0D0'></td>
<td>11</td>
<td>120 km/h</td>
</tr>

<tr>
<td>268</td>
<td>ATC EMERGENCIA</td>
<td>ATC 非常</td>
<td>0 (apagado) o 1 (encendido)</td>
<td bgcolor='#D0D0D0'></td>
<td>12</td>
<td>ATS esta activo</td>
</tr>

<tr>
<td>269</td>
<td>VELOCIDAD CONSTANTE</td>
<td>定速</td>
<td>0 (apagado) o 1 (encendido)</td>
<td bgcolor='#D0D0D0'></td>
<td bgcolor='#D0D0D0'></td>
<td bgcolor='#D0D0D0'></td>
</tr>

<tr>
<td>270</td>
<td>EB</td>
<td>EB</td>
<td>0 (apagado) o 1 (encendido)</td>
<td bgcolor='#D0D0D0'></td>
<td bgcolor='#D0D0D0'></td>
<td bgcolor='#D0D0D0'></td>
</tr>

<tr>
<td>271</td>
<td>Indicador de velocidad del ATC</td>
<td bgcolor='#D0D0D0'></td>
<td>0 - 12, ver tabla a la derecha</td>
<td bgcolor='#D0D0D0'></td>
<td bgcolor='#D0D0D0'></td>
<td bgcolor='#D0D0D0'></td>
</tr>
</tbody>
</table>

<h5 id="secciones-señalización">● Secciones (señalización)</h5>

<p>El contexto sección es definido cuando el objeto es posicionado usando Track.SigF.</p>

<table class='type0'>
<thead>
<tr>
<th>Variable</th>
<th>Descripción</th>
</tr>
</thead>

<tbody>
<tr>
<td><code>section</code></td>
<td>El valor de la sección aspecto que se nuestra.<br /><em>si esta variable es usada fuera de un contexto de Track.Sifg, la conducta actual es indefinida y sujeto a cambios.</em></td>
</tr>
</tbody>
</table>

<h2 id="a-name-performance-a-6-rendimiento"><a name="performance"></a>■ 6. Rendimiento</h2>

<p>Existen ciertos tipos de animaciones los cuales son menos costosos, y otros que son mas. También, los objetos adyacentes juegan un papel importante . Si quieres diseñar objetos animados con un mejor rendimiento posible <strong>para versiones futuras de openBVE</strong>, échale un vistazo a la siguiente tabla de rendimiento:</p>

<table class='type0'>
<thead>
<tr>
<th>Animación</th>
<th>Objeto</th>
<th>Rendimiento</th>
</tr>
</thead>

<tbody>
<tr>
<td>Cambios de estado</td>
<td>Solo posee caras opacas</td>
<td>Bien</td>
</tr>

<tr>
<td>Cambios de estado</td>
<td>Tiene parcialmente caras transparentes</td>
<td>Moderado</td>
</tr>

<tr>
<td>Traslación</td>
<td>Solo posee caras opacas</td>
<td>Bien</td>
</tr>

<tr>
<td>Traslación</td>
<td>Tiene parcialmente caras transparentes</td>
<td>Moderado</td>
</tr>

<tr>
<td>Rotación</td>
<td>Solo posee caras opacas</td>
<td>Bien</td>
</tr>

<tr>
<td>Rotación</td>
<td>Tiene parcialmente caras transparentes</td>
<td>Mal</td>
</tr>

<tr>
<td>Saltos de textura</td>
<td>Solo tiene caras opacas</td>
<td>Mal</td>
</tr>

<tr>
<td>Saltos de textura</td>
<td>Tiene parcialmente caras transparentes</td>
<td>Mal</td>
</tr>
</tbody>
</table>

<p>El rendimiento por lo general es mejor si el resultado de la función cambia sin frecuencia. Así que, incluso si habilitas el parámetro <em>RefreshRate</em> a cero, el rendimiento por lo general mejorará si el resultado de su formula es constante sobre largos periodos de tiempo. De otra manera, si cambia cada cuadro por segundo, el rendimiento por lo general empeorará.</p>

<p>Generalmente, debes evitar usar animaciones con caras parcialmente transparentes y enfocarte en caras opacas cuando sea posible. Tambien, intenta evitar los saltos de textura, y considera usar el cambio de estado o traslación donde sea posible.</p>

<h2 id="a-name-tips-a-7-sugerencias"><a name="tips"></a>■ 7. Sugerencias</h2>

<ul>
<li>Generalmente hablando, trata de mantener la complejidad de las funciones lo mas bajo posible. Esto no es el aspecto más critico, aunque, la mayoría del impacto del rendimiento resultará cuando se aplique resultados a una función, por ejemplo. rotar el objeto, y no evaluando la función.</li>
<li>Usa el parámetro RefreshRate cuando sea posible para así optimizar el rendimiento. Usualmente, puedes usar este parámetro cuando no necesites una animación suave, o cuando deliberadamente necesites que estas funciones solo se actualicen en intervalos.</li>
<li>No uses estas funciones cuando siempre evalúas la misma constante. Por ejemplo, no uses RotateXFunction = 3.14159, gira el objeto adyacente en el CSV/B3D/X directamente.</li>
<li>Cambios de estado son un método muy barato cuando el estado no cambia entre dos ejecuciones por el StateFunction. Si un cambio ocurre, esto es una operación relativamente costosa.</li>
<li>Trata de optimizar las operaciones condicionales <em>if</em> . Especialmente trata de evitar la anidación de funciones <em>if</em>. De vez en cuando, hay una solución matemática elegante.</li>
<li>Ciertas funciones, por ejemplo. Exp, Sin, Cos, etc. son relativamente costosas. Úsalas solo cuando sean absolutamente necesarias para un efecto. No incluyas operaciones innecesarias. Por ejemplo, el resultado de StateFunction es automáticamente redondeado hacia el entero más cercano, así que no apliques una función Round adicional explícito.</li>
<li>Cuando trabajas con objetos del coche, ten en mente que algunas variables tienen un indice de coche opcional (CarIndex). Debes usar este indice si necesitas consultar el estado de un coche en particular ( es decir, no necesariamente el único objeto que puede ser adjuntado).  Si, necesitas hacer una consulta el valor de un coche en particular del objeto que se plantea adjuntar, usa la variable sin el indice. Para objetos de escenario, por lo general no debes usar los indices del coche ya sea porque no puedes estar seguros de cuantos coches posee el tren consultado.</li>
</ul>

<h2 id="a-name-examples-a-8-funciones-de-ejemplo"><a name="examples"></a>■ 8. Funciones de ejemplo</h2>

<h5 id="luz-parpadeante">● Luz parpadeante</h5>

<table style="border: none;">
  <tbody>
  
    <tr>
      <td width="16" valign="top"></td>
      <td>
      <em>Template for a blinking light:</em>
      </td>
    </tr>
  
    <tr>
       <td width="16" valign="top">▶</td>
       <td bgcolor="#D4D8FF" style="border: 1px dashed;">
         <font style="font-family: monospace">
         <p style='display:inline;'>States = OBJECT0, OBJECT1<br />
StateFunction = value == 0<br />
RefreshRate = SEGUNDOS
         </font>
       </td>
    </tr>
  </tbody>
</table>

<h5 id="rotación-de-rueda">● Rotación de rueda</h5>

<table style="border: none;">
  <tbody>
  
    <tr>
      <td width="16" valign="top"></td>
      <td>
      <em>Template for the code used in an exterior car object:</em>
      </td>
    </tr>
  
    <tr>
       <td width="16" valign="top">▶</td>
       <td bgcolor="#D4D8FF" style="border: 1px dashed;">
         <font style="font-family: monospace">
         <p style='display:inline;'>States = OBJECT<br />
RotateXFunction = value + delta * speedometer / RADIO_DE_LA_RUEDA
         </font>
       </td>
    </tr>
  </tbody>
</table>

<h5 id="ciclo-a-través-de-una-lista-de-objetos">● Ciclo a través de una lista de objetos</h5>

<table style="border: none;">
  <tbody>
  
    <tr>
      <td width="16" valign="top"></td>
      <td>
      <em>Template for objects that are to be cycled through:</em>
      </td>
    </tr>
  
    <tr>
       <td width="16" valign="top">▶</td>
       <td bgcolor="#D4D8FF" style="border: 1px dashed;">
         <font style="font-family: monospace">
         <p style='display:inline;'>States = OBJECTO0, OBJECTO1, OBJECTO2, &hellip;<br />
StateFunction = mod[value + 1, CANTIDAD_DE_OBJETOS]<br />
RefreshRate = TIEMPO_POR_OBJETO
         </font>
       </td>
    </tr>
  </tbody>
</table>

<h5 id="señal-3-aspectos-para-track-section-0-2-4">● Señal (3-aspectos) para Track.Section(0; 2; 4)</h5>

<table style="border: none;">
  <tbody>
  
    <tr>
       <td width="16" valign="top">▶</td>
       <td bgcolor="#D4D8FF" style="border: 1px dashed;">
         <font style="font-family: monospace">
         <p style='display:inline;'>States = OBJETO_ROJO, OBJETO_AMARILLO, OBJETO_VERDE<br />
StateFunction = section / 2
         </font>
       </td>
    </tr>
  </tbody>
</table>

<h5 id="emplear-un-retardo-en-señales-de-aproximación-controlada">● Emplear un retardo en señales de aproximación controlada.</h5>

<p>Si deseas crear una señal que mantiene su comienzo en rojo hasta que el tren se acerca en cierta distancia, entonces usa un contador hacia abajo después que cambia su aspecto a verde, por favor, consulte a <a href="http://openbve.freeforums.org/delay-in-approach-controlled-signals-t1195.html#p5378" target="_blank">este post</a> en el foro para una explicación detallada. Una vez que entiendas el concepto, puedes usar este código de plantilla:</p>

<table style="border: none;">
  <tbody>
  
    <tr>
      <td width="16" valign="top"></td>
      <td>
      <em>Template for an approach-controlled delay in a signal with two aspects:</em>
      </td>
    </tr>
  
    <tr>
       <td width="16" valign="top">▶</td>
       <td bgcolor="#D4D8FF" style="border: 1px dashed;">
         <font style="font-family: monospace">
         <p style='display:inline;'>States = OBJETO_ROJO,OBJETO_VERDE
StateFunction = if[trackDistance&gt;DISTANCIA | section==0, 0, min[value + 0.5*delta/RETRASO, 1]]
         </font>
       </td>
    </tr>
  </tbody>
</table>

<table style="border: none;">
  <tbody>
  
    <tr>
      <td width="16" valign="top"></td>
      <td>
      <em>Template for an approach-controlled delay in a signal with any number of aspects:</em>
      </td>
    </tr>
  
    <tr>
       <td width="16" valign="top">▶</td>
       <td bgcolor="#D4D8FF" style="border: 1px dashed;">
         <font style="font-family: monospace">
         <p style='display:inline;'>States = OBJETO_ROJO, &hellip;, OBJETO_VERDE
StateFunction = if[trackDistance&gt;DISTANCIA | section==0, 0, if[value&lt;0.5, value + 0.5*value/RETRASO, section]]
         </font>
       </td>
    </tr>
  </tbody>
</table>

<h2 id="a-name-grammar-a-9-gramática-formal"><a name="grammar"></a>■ 9. Gramática formal</h2>

<p>La gramática formal del lenguaje puede no coincidir perfectamente con la implementación incluida en openBVE. Un ejemplo es a*-b el cual es válido bajo la gramática pero el analizador lo rechaza.</p>

<table style="border: none;">
  <tbody>
  
    <tr>
       <td width="16" valign="top">▶</td>
       <td bgcolor="#D4D8FF" style="border: 1px dashed;">
         <font style="font-family: monospace">
         <p style='display:inline;'>&lt;expression&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;::=  &lt;xor_expression&gt; &ldquo;&rdquo; &lt;expression&gt;     | &lt;xor_expression&gt;<br />
&lt;xor_expression&gt;&nbsp;&nbsp;&nbsp;&nbsp;::= &lt;or_expression&gt;  &ldquo;^&rdquo; &lt;xor_expression&gt; | &lt;or_expression&gt;<br />
&lt;or_expression&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;::= &lt;not_expression&gt; &ldquo;|&rdquo; &lt;or_expression&gt;  | &lt;not_expression&gt;<br />
<br/>&lt;not_expression&gt;&nbsp;&nbsp;&nbsp;&nbsp;::= &ldquo;!&rdquo; &lt;equal_expression&gt; | &lt;equal_expression&gt;<br />
<br/>&lt;equal_expression&gt;&nbsp;&nbsp;::= &lt;plus_expression&gt; &ldquo;==&rdquo; &lt;equal_expression&gt; | &lt;plus_expression&gt; &ldquo;!=&rdquo; &lt;equal_expression&gt; |<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;plus_expression&gt; &ldquo;&gt;&rdquo;  &nbsp;&lt;equal_expression&gt; | &lt;plus_expression&gt; &ldquo;&lt;&rdquo;  &nbsp;&lt;equal_expression&gt; |<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;plus_expression&gt; &ldquo;&lt;=&rdquo; &lt;equal_expression&gt; | &lt;plus_expression&gt; &ldquo;&lt;=&rdquo; &lt;equal_expression&gt; | &lt;plus_expression&gt;<br />
<br/>&lt;plus_expression&gt;&nbsp;&nbsp;&nbsp;::= &lt;times_expression&gt; &ldquo;+&rdquo; &lt;plus_expression&gt; &nbsp;| &lt;times_expression&gt; &ldquo;-&rdquo; &lt;plus_expression&gt; &nbsp;| &lt;times_expression&gt;<br />
<br/>&lt;times_expression&gt;&nbsp;&nbsp;::= &lt;divide_expression&gt; &ldquo;*&rdquo; &lt;times_expression&gt;  | &lt;divide_expression&gt;<br />
&lt;divide_expression&gt; ::= &lt;minus_expression&gt;  &ldquo;/&rdquo; &lt;divide_expression&gt; | &lt;minus_expression&gt;<br />
<br/>&lt;minus_expression&gt;&nbsp;&nbsp;::= &ldquo;-&rdquo; &lt;function_call&gt; | &lt;function_call&gt;<br />
&lt;function_call&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;::= &lt;name&gt; &ldquo;[&rdquo; &lt;expression&gt; (&ldquo;,&rdquo; &lt;expression&gt;)* &ldquo;]&rdquo; | &lt;term&gt;<br />
<br/>&lt;term&gt;&nbsp;&nbsp;&nbsp;::= &ldquo;(&rdquo; &lt;expression&gt; &ldquo;)&rdquo; | &lt;name&gt; | &lt;number&gt;<br />
&lt;number&gt; ::= &lt;digit&gt;*<br />
&lt;name&gt;&nbsp;&nbsp;&nbsp;::= &lt;letter&gt; (&lt;letter&gt; | &lt;digit&gt;)*<br />
<br/>&lt;letter&gt; ::= &ldquo;A&rdquo; | &ldquo;B&rdquo; | &ldquo;C&rdquo; | &ldquo;D&rdquo; | &ldquo;E&rdquo; | &ldquo;F&rdquo; | &ldquo;G&rdquo; | &ldquo;H&rdquo; | &ldquo;I&rdquo; | &ldquo;J&rdquo; | &ldquo;K&rdquo; | &ldquo;L&rdquo; | &ldquo;M&rdquo; |<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&ldquo;N&rdquo; | &ldquo;O&rdquo; | &ldquo;P&rdquo; | &ldquo;Q&rdquo; | &ldquo;R&rdquo; | &ldquo;S&rdquo; | &ldquo;T&rdquo; | &ldquo;U&rdquo; | &ldquo;V&rdquo; | &ldquo;W&rdquo; | &ldquo;X&rdquo; | &ldquo;Y&rdquo; | &ldquo;Z&rdquo; |<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&ldquo;a&rdquo; | &ldquo;b&rdquo; | &ldquo;c&rdquo; | &ldquo;d&rdquo; | &ldquo;e&rdquo; | &ldquo;f&rdquo; | &ldquo;g&rdquo; | &ldquo;h&rdquo; | &ldquo;i&rdquo; | &ldquo;j&rdquo; | &ldquo;k&rdquo; | &ldquo;l&rdquo; | &ldquo;m&rdquo; |<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&ldquo;n&rdquo; | &ldquo;o&rdquo; | &ldquo;p&rdquo; | &ldquo;q&rdquo; | &ldquo;r&rdquo; | &ldquo;s&rdquo; | &ldquo;t&rdquo; | &ldquo;u&rdquo; | &ldquo;v&rdquo; | &ldquo;w&rdquo; | &ldquo;x&rdquo; | &ldquo;y&rdquo; | &ldquo;z&rdquo;<br />
&lt;digit&gt;&nbsp;&nbsp;::= &ldquo;0&rdquo; | &ldquo;1&rdquo; | &ldquo;2&rdquo; | &ldquo;3&rdquo; | &ldquo;4&rdquo; | &ldquo;5&rdquo; | &ldquo;6&rdquo; | &ldquo;7&rdquo; | &ldquo;8&rdquo; | &ldquo;9&rdquo;
         </font>
       </td>
    </tr>
  </tbody>
</table>


</div>

      <div id="footer">

      </div>

    </div>

  </body>
</html>

